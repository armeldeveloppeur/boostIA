# -*- coding: utf-8 -*-
"""app

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1XgWcl4oHrvFC_MvXYCGSDnoZKkQs4E2i
"""

import streamlit as st
import pandas as pd
import joblib

# Configuration de la page
st.set_page_config(page_title="IA Pr√©diction Notes", layout="wide")
st.title("üéì Assistant IA : Optimisez votre R√©ussite Scolaire")

# Chargement du mod√®le
model = joblib.load('modele_notes.pkl')
encoders = joblib.load('encoders.pkl')

# Formulaire d'entr√©e
with st.sidebar:
    st.header("Mes Informations")
    study_hours = st.slider("Heures d'√©tude quotidiennes", 0, 10, 4)
    class_attendance = st.slider("Taux de pr√©sence (%)", 0, 100, 80)
    sleep_hours = st.slider("Heures de sommeil", 4, 12, 8)
    sleep_quality = st.selectbox("Qualit√© du sommeil", ["Good", "Average", "Poor"])
    exam_difficulty = st.selectbox("Difficult√© de l'examen", ["Low", "Medium", "High"])
    # Ajoutez ici les autres variables selon votre dataset

# Bouton de pr√©diction
if st.button("Analyser mon profil"):
    # Pr√©paration des donn√©es (on cr√©e un DataFrame avec les noms de colonnes exacts du CSV)
    data = {
        'Hours_Studied': [study_hours],
        'Attendance': [class_attendance],
        'Sleep_Hours': [sleep_hours],
        'Sleep_Quality': [sleep_quality],
        'Exam_Difficulty': [exam_difficulty]
    }
    df_input = pd.DataFrame(data)

    # Encodage automatique
    for col, le in encoders.items():
        if col in df_input.columns:
            df_input[col] = le.transform(df_input[col])

    # Pr√©diction
    note_predite = model.predict(df_input)[0]

    # Affichage du r√©sultat
    st.metric("Note estim√©e", f"{note_predite:.1f} / 100")

    # --- INSIGHTS ET RECOMMANDATIONS CONCR√àTES ---
    st.subheader("üí° Recommandations personnalis√©es")
    col1, col2 = st.columns(2)

    with col1:
        if class_attendance < 85:
            st.warning("**Assiduit√© :** Votre taux de pr√©sence est faible. Augmenter votre pr√©sence de 10% pourrait booster votre note.")
        if study_hours < 5:
            st.info("**Travail :** La moyenne des √©tudiants qui r√©ussissent √©tudient plus de 5h par jour.")

    with col2:
        if sleep_hours < 7:
            st.error("**Sommeil :** Le manque de sommeil nuit √† la m√©morisation. Visez 8h pour stabiliser votre score.")